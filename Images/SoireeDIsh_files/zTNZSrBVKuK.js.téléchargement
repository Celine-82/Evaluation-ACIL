if (self.CavalryLogger) { CavalryLogger.start_js(["HPolq9r"]); }

__d("MAnimatedScroll",["MAnimator","MViewport","Vector","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=500;function j(a){a&&c("clearTimeout")(a);return null}function k(a,b,e){h=j(h);b=b.duration===null||b.duration===void 0?i:b.duration;var f=d("MViewport").getScrollTop();if(f===a)return;var g=f;c("MAnimator").play(f,a,b,function(b){var e=c("MAnimator").easeInOutCubic((b-g)/(f-a));e=Math.round((b-g)*e+g);g=b;d("MViewport").scrollToY(e)});e&&(h=c("setTimeoutAcrossTransitions")(e,b))}function a(a,b){k(0,a,b)}function b(a,b,d,e){k(c("Vector").getPos(a).y-b,d,e)}g.scrollToOffset=k;g.scrollToTop=a;g.scrollToNode=b}),98);
__d("MStoriesProductionInfo",[],(function(a,b,c,d,e,f){"use strict";a={_uploadStatus:null,_uri:null,_rotate:0,setUploadStatus:function(a){this._uploadStatus=a},getUploadStatus:function(){return this._uploadStatus},setChosenImage:function(a){var b=a.URI;a=a.rotate;this._uri=b;this._rotate=a},getChosenImage:function(){return{URI:this._uri,rotate:this._rotate}}};e.exports=a}),null);
__d("MStoriesUploadStatus",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({IDLE:0,UPLOADING:1,FAILED:2});f["default"]=a}),66);
__d("MStoriesStratcomEvents",[],(function(a,b,c,d,e,f){"use strict";a="fb:stories:mobile:story:viewer:story:deleted";b="fb:stories:mobile:story:viewer:delete:thread";c="fb:stories:mobile:story:viewer:story:muted";d="m:stories:thread:media:pause";e="m:stories:thread:media:pause:with:cover";var g="m:stories:thread:media:play",h="fb:stories:mobile:story:viewer:nextBucket",i="fb:stories:mobile:story:viewer:nextCard",j="fb:stories:mobile:story:viewer:card:changed:by:viewer:sheet",k="fb:stories:mobile:story:viewer:prevBucket",l="fb:stories:mobile:story:viewer:click:story:in:viewer:sheet",m="m:stories:card:modal:hide",n="m:video:player:play",o="m:video:player:playing",p="m-stories-viewer-sheet-hide",q="m-stories-viewer-sheet-hidden",r="m-stories-viewer-sheet-open",s="m-stories-viewer-sheet-image-changed-by-scrolling",t="m-stories-viewer-sheet-native-template-changed-by-scrolling",u="m:stories:production:preview-controls:hide",v="m:stories:production:preview-controls:show",w="m:stories:production:text-controls:hide",x="m:stories:production:text-controls:show",y="m:stories:production:text-overlay:remove",z="m:stories:production:text-overlay:focus",A="m:stories:swipe:left",B="m:stories:swipe:right",C="m:stories:swipe:down",D="m:stories:swipe:up",E="fb:stories:mobile:story:viewer:swipe:reply",F="m:stories:toast:showing",G="m:stories:toast:hiding",H="m:stories:upload:failed",I="m:stories:upload:success",J="m:stories:overlay-interaction:pause",K="m:stories:overlay-interaction:play",L="m:stories:set-bucket-ids-use-for-testing-only";f.DELETE_BUCKET=a;f.DELETE_THREAD=b;f.MUTE_BUCKET=c;f.MEDIA_PAUSE=d;f.MEDIA_PAUSE_WITH_COVER=e;f.MEDIA_PLAY=g;f.NEXT_BUCKET=h;f.NEXT_CARD=i;f.CARD_CHANGED_BY_VIEWER_SHEET=j;f.PREV_BUCKET=k;f.CLICK_STORY_IN_VIEWER_SHEET=l;f.THREAD_MODAL_HIDE=m;f.VIDEO_PLAY=n;f.VIDEO_PLAYING=o;f.VIEWER_SHEET_HIDE=p;f.VIEWER_SHEET_HIDDEN=q;f.VIEWER_SHEET_OPEN=r;f.VIEWER_SHEET_IMAGE_CHANGED_BY_SCROLLING=s;f.VIEWER_SHEET_NATIVE_TEMPLATE_CHANGED_BY_SCROLLING=t;f.PRODUCTION_PREVIEW_CONTROLS_HIDE=u;f.PRODUCTION_PREVIEW_CONTROLS_SHOW=v;f.PRODUCTION_TEXT_CONTROLS_HIDE=w;f.PRODUCTION_TEXT_CONTROLS_SHOW=x;f.PRODUCTION_TEXT_OVERLAY_REMOVE=y;f.PRODUCTION_TEXT_OVERLAY_FOCUS=z;f.SWIPE_LEFT=A;f.SWIPE_RIGHT=B;f.SWIPE_DOWN=C;f.SWIPE_UP=D;f.SWIPE_REPLY=E;f.TOAST_SHOWING=F;f.TOAST_HIDING=G;f.UPLOAD_FAILED=H;f.UPLOAD_SUCCESS=I;f.OVERLAY_INTERACTION_PAUSE=J;f.OVERLAY_INTERACTION_PLAY=K;f.SET_BUCKET_IDS_USE_FOR_TESTING_ONLY=L}),66);
__d("MStoriesUtils",["cx","fbt","DOM","MPageController","MStoriesStratcomEvents","MStoriesUIConstants","Stratcom","Style","UserAgent","gkx","goURI"],(function(a,b,c,d,e,f,g,h){"use strict";var i={UNSET:"UNSET",PUBLIC:"PUBLIC",FRIENDS_AND_CONNECTIONS:"FRIENDS_AND_CONNECTIONS",FRIENDS:"FRIENDS",CUSTOM:"CUSTOM"},j=[],k={displaysExifRotationCorrectly:function(){return b("UserAgent").isBrowser("Chrome >= 81")||b("UserAgent").isBrowser("Mobile Safari >= 13.1")||b("UserAgent").isBrowser("Safari >= 13.1")},getDocumentScale:function(){var a=window.visualViewport;return a?a.scale:document.body?document.body.clientWidth/window.innerWidth:1},listenForThreadTransition:function(a){var c,d;c=[(c=b("Stratcom")).listen("click","m-stories-next-button",a),c.listen("click","m-stories-prev-button",a),c.listen((d=b("MStoriesStratcomEvents")).CARD_CHANGED_BY_VIEWER_SHEET,null,a),c.listen(d.NEXT_CARD,null,a),c.listen(d.NEXT_BUCKET,null,a),c.listen(d.PREV_BUCKET,null,a)];return c},iOSVersion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a==null?null:parseInt(a[1],10)}return null},goBackToHomepage:function(a){a===void 0&&(a=!1);if(a){window.history.back();return}if(j.length>0){b("MPageController").load(j.pop(),{expiration:b("MStoriesUIConstants").REFRESH_TIMEOUT_IN_MS});return}a=document.getElementsByClassName("_129-")[0];var c=k.iOSVersion();c=c&&c<10;!c&&(a||b("gkx")("709647"))?(b("DOM").show(a),b("MPageController").load("/",{expiration:b("MStoriesUIConstants").REFRESH_TIMEOUT_IN_MS})):b("goURI")("/")},getCropInfo:function(a,b,c,d,e){var f={sx:0,sy:0,sWidth:a,sHeight:b,dWidth:c,dHeight:d};if(!e){e=a/b;e=c/e;e<=d?f.dHeight=e:(f.sy=(e-d)/2*(b/e),f.sHeight=b-f.sy*2)}else{e=c/b*a;e<=d?f.dHeight=e:(f.sx=(e-d)/2*(a/d),f.sWidth=a-f.sx*2)}return f},getAudienceModeHeaderMapping:function(a){switch(a){case i.PUBLIC:return h._(/*FBT_CALL*/"Public"/*FBT_CALL*/);case i.FRIENDS_AND_CONNECTIONS:return h._(/*FBT_CALL*/"Amis et contacts"/*FBT_CALL*/);case i.FRIENDS:return h._(/*FBT_CALL*/"Amis"/*FBT_CALL*/);case i.CUSTOM:return h._(/*FBT_CALL*/"Personnalis\u00e9e"/*FBT_CALL*/);default:return h._(/*FBT_CALL*/"Non d\u00e9fini"/*FBT_CALL*/)}},touchMoveListener:function(a){a.touches.length===1&&k.getDocumentScale()===1&&a.preventDefault()},truncateParagraphToFitContainer:function(a){var c=a.textContent,d=!1;do{var e=b("Style").get(a,"max-height");b("Style").set(a,"max-height","unset");var f=a.clientHeight;b("Style").set(a,"maxHeight",e);e=a.clientHeight;if(f<=e){d=!0;break}c=c.slice(0,-1);a.textContent=c+"..."}while(!d)},setExitUri:function(a,b){b===void 0&&(b=!1);if(a==null)return;b?j.push(a):j=[a]},getInnerText:function(a){var b="",c=!0;for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];e.nodeType===Node.TEXT_NODE?(b+=e.textContent,c=!1):e.nodeName.toLowerCase()==="br"&&!c?(b+="\n",c=!0):e.nodeName.toLowerCase()!=="br"&&(c||(b+="\n"),b+=e.textContent,b+="\n",c=!0)}return b},isIOS:function(){if(!navigator.userAgent)return!1;return navigator.userAgent.match(/iPhone/)||navigator.userAgent.match(/iPod/)||navigator.userAgent.match(/iPad/)?!0:!1}};e.exports=k}),null);
__d("XMStoriesProductionPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/preview/",{session_key:{type:"String"}})}),null);
__d("MStoriesCreation",["fbt","Bootloader","MPageController","MStoriesProductionInfo","MStoriesUploadStatus","MStoriesUtils","Promise","UserAgent","WebFunnelLogger","XMStoriesProductionPreviewController","nullthrows","promiseDone","uuid"],(function(a,b,c,d,e,f,g,h){function i(a){return new(b("Promise"))(function(b){var c=new FileReader();c.onload=function(a){return b(a.target.result)};c.readAsDataURL(a)})}a=function(){function a(b){var e=this;this.$3="";this.$5=function(a){a=d("MStoriesProductionInfo").getUploadStatus();if(a===c("MStoriesUploadStatus").UPLOADING){c("Bootloader").loadModules(["MStoriesToast"],function(a){a.showDefaultToast(h._(/*FBT_CALL*/"Importation de la story"/*FBT_CALL*/))},"MStoriesCreation");return}e.$3=c("uuid")();new(c("WebFunnelLogger"))("FBStoriesMTouchTrayProductionFunnelDefinition").markStart().setSessionKey(e.$3).setAction("Production item select").log();d("MStoriesProductionInfo").setUploadStatus(c("MStoriesUploadStatus").IDLE);e.$2.click()};var f=0,g=c("UserAgent").isBrowser("Firefox")&&c("UserAgent").isPlatform("Android");this.$1=b.item;this.$2=b.input;a.$4=this;this.$1.addEventListener("click",this.$5,!0);this.$2&&this.$2.addEventListener("change",function(a){a=a.target.files;var b=null;for(var h=0;h<a.length;h++)if(a[h].type.match(/^image\//)){b=a[h];break}if(b!==null){e.$6();var j=function(a){f=a;if(g)c("promiseDone")(i(c("nullthrows")(b)),function(a){a=a;d("MStoriesProductionInfo").setChosenImage({URI:a,rotate:f});e.$7()});else{a=URL.createObjectURL(c("nullthrows")(b));d("MStoriesProductionInfo").setChosenImage({URI:a,rotate:f});e.$7()}};d("MStoriesUtils").displaysExifRotationCorrectly()?j(0):c("Bootloader").loadModules(["ImageExifRotation"],function(a){a.getRotation(b,j)},"MStoriesCreation")}})}var b=a.prototype;b.$6=function(){d("MStoriesUtils").setExitUri(window.location.href,!0)};b.$7=function(){new(c("WebFunnelLogger"))("FBStoriesMTouchTrayProductionFunnelDefinition").setAction("Opening production preview").setSessionKey(this.$3).log();var a=c("XMStoriesProductionPreviewController").getURIBuilder().setString("session_key",this.$3).getURI();d("MPageController").load(a);this.$3=""};return a}();a.$4=null;g["default"]=a}),98);
__d("PerfFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744178");c=b("FalcoLoggerInternal").create("perf",a);e.exports=c}),null);
__d("QPLEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.i}function b(a){return(a=a.r)!=null?a:0}function c(a){return(a=a.m)!=null?a:1}f.getMarkerId=a;f.getSampleRate=b;f.getSamplingMethod=c}),66);
__d("QPLTimestamp",[],(function(a,b,c,d,e,f){"use strict";function g(a){if(a===0)return"0";a=a.toFixed(6).split(".",2);var b=a[0];a=a[1];return b==="0"?a.replace(/^0+/,""):b+a}function a(a,b){b=b-a;return g(b)}f.timestampToSerializedNanoseconds=g;f.calculateDurationAsNanoseconds=a}),66);
__d("crc32",[],(function(a,b,c,d,e,f){function b(a){var b=-1;for(var c=0,d=a.length;c<d;c++)b=b>>>8^g[(b^a.charCodeAt(c))&255];return~b}var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];a.Int32Array!==void 0&&(g=new Int32Array(g));f["default"]=b}),66);
__d("QPLUtils",["crc32"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("crc32")(a)>>>0}function a(a){return a!=null?h(a):0}g.unsignedCrc32=h;g.deriveInstanceKey=a}),98);
__d("QuickPerformanceLoggerTypes",[],(function(a,b,c,d,e,f){"use strict";a=1;b=3;f.EVENT_BASED_SAMPLING=a;f.USER_BASED_SAMPLING=b}),66);
__d("QPLCore",["QPLEvent","QPLTimestamp","QPLUtils","QuickPerformanceLoggerTypes"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d){var e=b[a];if(!e||Object.entries(e).length===0)return null;var f={};Object.keys(e).forEach(function(a){var b=e[a];b===null||b===void 0||b.length===0?delete e[a]:d?f[a]=d(b):f[a]=b});return b={},b[a]=Object.assign({},c&&c[a],f),b}function i(a,b){if(a==null)return b;var c=Object.assign({},b,h("string",a,b),h("int",a,b,Math.trunc),h("double",a,b),h("bool",a,b),h("string_array",a,b),h("int_array",a,b,function(a){return a.map(Math.trunc)}),h("double_array",a,b),h("bool_array",a,b));Object.keys(c).forEach(function(a){var b=c[a];(b===null||b===void 0||Object.entries(b).length===0)&&delete c[a]});return Object.entries(c).length!==0?c:null}function j(a,b){var c={};b.trackedForLoss===!0&&(c.tracked_for_loss=!0);typeof b.absoluteTimeOrigin==="number"&&(c.absolute_time_origin_ns=d("QPLTimestamp").timestampToSerializedNanoseconds(b.absoluteTimeOrigin));b=babelHelpers["extends"]({},a,c);return b}function k(a,b){if(!b)return a;var c={};b.string&&(c.annotations=b.string);b["int"]&&(c.annotations_int=b["int"]);b["double"]&&(c.annotations_double=b["double"]);b.bool&&(c.annotations_bool=b.bool);b.string_array&&(c.annotations_string_array=b.string_array);b.int_array&&(c.annotations_int_array=b.int_array);b.double_array&&(c.annotations_double_array=b.double_array);b.bool_array&&(c.annotations_bool_array=b.bool_array);return babelHelpers["extends"]({},a,c)}var l=new Map([[d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING,"random_sampling"],[d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING,"per_user"]]);function m(a,b){if(a===0)return!1;if(a<=1)return!0;return typeof b==="string"?d("QPLUtils").unsignedCrc32(b)%a===0:Math.random()*a<=1}a=function(){function a(a){this.$2=1;this.$3=100;this.$4=new Map();this.$5=new Map();this.$6=null;this.$8=new Map();this.activeMarkers=new Map();this.$1=a;this.$7=a.logger;this.$5=(a=a.listenersWithMarker)!=null?a:new Map()}var b=a.prototype;b.getMarker=function(a,b){a=this.$9(d("QPLEvent").getMarkerId(a));if(!a)return null;a=a.get(b);return!a?null:a};b.$9=function(a){return this.activeMarkers.get(a)};b.addMarker=function(a,b,c){var d=this.activeMarkers.get(a);d||(d=new Map(),this.activeMarkers.set(a,d));d.set(b,c)};b.deleteMarker=function(a,b){(a=this.activeMarkers.get(a))==null?void 0:a["delete"](b)};b.markerStart=function(a,b,c,e){b===void 0&&(b=0);c===void 0&&(c=this.currentTimestamp());e=e===void 0?{}:e;var f=e.cancelExisting;f=f===void 0?!1:f;var g=e.cancelOnUnload;g=g===void 0?!1:g;var h=e.trackedForLoss;h=h===void 0?!1:h;var i=e.type;i=i===void 0?1:i;var j=e.samplingBasis;j=j===void 0?null:j;e=e.qplInternalDoNotUseAbsoluteTimeOrigin;this.getMarker(a,b)&&(this.$7.warn("Duplicate QPL event: "+d("QPLEvent").getMarkerId(a)+" & instanceKey: "+b),f&&(this.$7.warn("Cancelling duplicate QPL markerId: "+d("QPLEvent").getMarkerId(a)+" & instanceKey: "+b),this.markerEnd(a,4,b,c)));f=this.$10(a,j);j=f[0];var k=f[1];f=f[2];var l={event:a,passesSampling:j,timestamp:c,sampleRate:k,samplingMethod:f,points:[],cancelOnUnload:g,trackedForLoss:h,type:i};typeof e==="number"&&(l.absoluteTimeOrigin=e);this.$4.forEach(function(d){d.onMarkerStart&&d.onMarkerStart(a,b,c)});this.$5.forEach(function(d){d.onMarkerStartWithMarker(a,b,c,l)});j&&this.addMarker(d("QPLEvent").getMarkerId(a),b,l);j&&h===!0&&this.$11({marker_id:27787271,action_id:0,sample_rate:1,annotations_int:{tracked_marker_id:d("QPLEvent").getMarkerId(a)},marker_type:1});j&&this.$4.forEach(function(d){d.onMarkerStarted&&d.onMarkerStarted(a,b,c)})};b.markerAnnotate=function(a,b,c){c=c===void 0?{}:c;c=c.instanceKey;var d=c===void 0?0:c;this.$4.forEach(function(c){Object.keys(b).forEach(function(e){var f=b[e];if(!f)return;Object.keys(f).forEach(function(b){c.onAnnotation&&c.onAnnotation(a,d,b,f[b])})})});c=this.getMarker(a,d);if(!c)return;c.annotations=i(b,c.annotations)};b.markerPoint=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey,e=d===void 0?0:d,f=c.data;d=c.timestamp;var g=d===void 0?this.currentTimestamp():d;this.$4.forEach(function(c){if(c.onMarkerPoint){c.onMarkerPoint(a,e,b,f==null?void 0:(c=f.string)==null?void 0:c.__key,g)}});c=this.getMarker(a,e);if(!c)return;d={name:b,timeSinceStart:Math.trunc(g-c.timestamp)};var h=i(f);h&&(d.data=h);c.points.push(d)};b.markerEnd=function(a,b,c,e){c===void 0&&(c=0);e===void 0&&(e=this.currentTimestamp());this.$4.forEach(function(d){d.onMarkerEnd&&d.onMarkerEnd(b,a,c,e)});var f=this.getMarker(a,c);if(!f)return;if(f.passesSampling){if(f.timestampIsApproximate!==!0){var g={marker_id:d("QPLEvent").getMarkerId(a),action_id:b,instance_id:c,sample_rate:f.sampleRate,method:l.get(f.samplingMethod),duration_ns:d("QPLTimestamp").calculateDurationAsNanoseconds(f.timestamp,e),points:f.points,metadata:{application_analytics:{time_since_qpl_module_init:e-this.$1.moduleLoadTimestamp}},marker_type:f.type,flags:1};g=k(g,f.annotations);g=j(g,f);this.$11(g)}this.$6===d("QPLEvent").getMarkerId(a)&&this.$1.onDebuggingIdEnded&&this.$1.onDebuggingIdEnded()}this.deleteMarker(d("QPLEvent").getMarkerId(a),c)};b.markerDrop=function(a,b){b===void 0&&(b=0);this.deleteMarker(d("QPLEvent").getMarkerId(a),b);var c=this.currentTimestamp();this.$4.forEach(function(d){d.onMarkerDrop&&d.onMarkerDrop(a,b,c)})};b.markEvent=function(a,b,c,e){var f;e=e===void 0?{}:e;var g=e.timestamp;g=g===void 0?this.currentTimestamp():g;e=e.annotations;if((f=this.$1.quickLogConfigHelper)==null?void 0:f.isKillswitchOn())return;f=this.$10(a);var h=f[0],j=f[1];f=f[2];if(!h)return;h=i(typeof e==="function"?e():e);e={marker_id:d("QPLEvent").getMarkerId(a),action_id:0,instance_id:0,sample_rate:j,method:l.get(f),da_type:b,da_level:c,metadata:{application_analytics:{time_since_qpl_module_init:g-this.$1.moduleLoadTimestamp}},marker_type:1,flags:1};this.$11(k(e,h))};b.dropAllMarkers=function(){this.activeMarkers.clear()};b.setAlwaysOnSampleRate=function(a,b){this.$8.set(a,b)};b.setDefaultSampleRate=function(a){this.$3=a};b.currentTimestamp=function(){return this.$1.performanceNow()};b.enableDebug=function(a){this.$6=a};b.disableDebug=function(){this.$6=null};b.addListener=function(a){var b=this,c=this.$2++;this.$4.set(c,a);return{dispose:function(){b.$4["delete"](c)}}};b.$10=function(a,b){if(this.$1.unsampleAllEvents&&this.$1.unsampleAllEvents()||this.$6===d("QPLEvent").getMarkerId(a))return[!0,1,d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING];var c=d("QPLEvent").getSampleRate(a),e=d("QPLEvent").getSamplingMethod(a);if(this.$8.get(a)==null&&c!==0&&e===d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING){var f;return[!0,(f=c)!=null?f:1,d("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING]}f=(a=(f=this.$8.get(a))!=null?f:c)!=null?a:this.$3;a=(c=e)!=null?c:d("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING;e=m(f,b);return[e,f,a]};b.$11=function(a){var b=this.$1.decorateEventBeforeUpload?this.$1.decorateEventBeforeUpload(a):a;this.$1.sendEvent(a,b)};b.getActiveMarkerIds=function(a){var b=a.type,c=new Set();this.activeMarkers.forEach(function(a,d){a.forEach(function(a){if(a.type===b){c.add(d);return}})});return Array.from(c)};b.forEachMarkerInstance=function(a,b){a=this.$9(a);if(!a)return;for(var a=a.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];b(f,e.event)}};return a}();a.normalizeAnnotations=i;g["default"]=a}),98);
__d("USIDFlag",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({HTTP_HEADER_SESSION:"HH",LOCAL_STORAGE_FAILURE:"LSF",SERVER_GENERATED_SESSION:"SGS",SERVER_PARSE_FAILURE:"SPF",SESSION_STORAGE_FAILURE:"SSF",UNKNOWN_VERSION_FAILURE:"UVF",UNKOWN_DATA_FAILURE:"UDF"});c=a;f["default"]=c}),66);
__d("USIDUtils",["Cookie","Random","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=4294967295,i=36,j="usidt",k="usida",l=1,m=6;function a(){var a=[];c("WebStorage").isLocalStorageQuotaExceeded()&&a.push("LSF");c("WebStorage").isSessionStorageQuotaExceeded()&&a.push("SSF");return a}function n(a){var b=Math.floor(Date.now()/1e3),c=Math.floor(d("Random").random()*h);a=a+Number(b&h).toString(i)+c.toString(i);return a}function o(a,b,c){if(a==null)return{ver:l,id:n(c)};a=a.getItem(b);if(a==null)return{ver:l,id:n(c)};b=JSON.parse(a);return b.ver!==l?{ver:l,id:n(c)}:b}function p(a,b,d){if(a==null)return;c("WebStorage").setItemGuarded(a,b,JSON.stringify(d))}function q(a,b){if(c("Cookie")==null)return{ver:l,id:n(b)};a=c("Cookie").get(a);if(a==null||a=="")return{ver:l,id:n(b)};var d;try{d=JSON.parse(a)}catch(b){d=JSON.parse(atob(a))}return d.ver!==l?{ver:l,id:n(b)}:d}function r(a,b){if(c("Cookie")==null)return;c("Cookie").set(a,btoa(JSON.stringify(b)))}function b(){var a=o(c("WebStorage").getSessionStorageForRead(),j,"T");return a.id}function e(a){p(c("WebStorage").getSessionStorage(),j,{ver:l,id:a})}function s(){var a,b=q(k,"A");return{id:b.id,time:(a=b.time)!=null?a:0,startTime:(a=b.startTime)!=null?a:0}}function f(a){r(k,{ver:l,id:a.id,time:a.time});var b=s();return b.id===a.id&&b.time===a.time}g.VERSION=m;g.getFlags=a;g.generateId=n;g.getExistingTabId=b;g.writeTabId=e;g.getExistingActivityInfo=s;g.writeActivityInfo=f}),98);
__d("USIDCore",["DateConsts","USIDUtils","asyncParams"],(function(a,b,c,d,e,f,g){"use strict";var h=30,i=d("DateConsts").MIN_PER_HOUR*5,j=2,k="__usid";function l(){return Math.floor(Date.now()/d("DateConsts").MS_PER_SEC)}a=function(){function a(a,b,c,e,f,g){this.$1=a;this.$2=b;this.$3=c;this.$8=e;this.$9=f;this.$4=g.activityTrigger;this.$5=((b=g.activityTimeoutInMin)!=null?b:h)*60;this.$6=((c=g.activityMaxTimeInMin)!=null?c:i)*60;this.$7=((e=g.activityCacheTimeoutInMin)!=null?e:j)*60;this.$10=0;d("USIDUtils").writeTabId(a);this.triggerActivity()}var b=a.prototype;b.getFlags=function(){return this.$9};b.getRequestVersion=function(){return this.$8};b.getSessionVersion=function(){return d("USIDUtils").VERSION};b.getTabId=function(){return this.$1};b.getPageId=function(){return this.$2};b.getTransitionId=function(){return this.$3};b.getActivityId=function(){var a=this.$11();return a.id};b.getActivityTimeOut=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=l();return this.$5-(b-a.time)};b.getActivityMaxTime=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=l();return this.$6-(b-a.startTime)};b.getSessionID=function(){return this.getTabId()+":"+this.getPageId()+":"+this.getTransitionId()+"-"+this.getActivityId()};b.serializeForRequest=function(){this.$4==="request"&&this.triggerActivity();return this.$12()};b.$12=function(){var a=this.getSessionVersion(),b=this.getSessionID(),c=this.getRequestVersion(),d=this.getFlags().join(",");return a+"-"+b+"-RV="+c+":F="+d};b.contextData=function(){return{usid_override:this.serializeForRequest()}};b.$11=function(){var a=d("USIDUtils").getExistingActivityInfo(),b=this.$13(a);b&&this.$14(a);return a};b.$14=function(a){a=d("USIDUtils").writeActivityInfo(a);a&&d("asyncParams").add(k,this.$12())};b.$13=function(a){var b=l();if(b-a.time>this.$5){a.id=d("USIDUtils").generateId("A");a.time=b;a.startTime=b;return!0}return!1};b.triggerActivity=function(){var a=l();if(a-this.$10>this.$7){var b=this.$11();b.time=a;this.$14(b);this.$10=a}};b.nextTransition=function(){this.triggerActivity(),this.$3++};return a}();g["default"]=a}),98);
__d("USID",["USIDCore","USIDMetadata","USIDUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=function(a){if(h!=null)return h;var b=d("USIDUtils").getExistingTabId(),e=c("USIDMetadata").page_id,f=c("USIDMetadata").transition_id,g=c("USIDMetadata").version,i=d("USIDUtils").getFlags();h=new(c("USIDCore"))(b,e,f,g,i,a);return h};a=function(){return i({activityTrigger:"request"})};b={init:i,get:a};g["default"]=b}),98);
__d("QuickPerformanceLogger",["Arbiter","Bootloader","Env","FBLogger","PerfFalcoEvent","PerfXSharedFields","Promise","QPLCore","QPLEvent","Run","USID","WebStorage","cr:1367102","cr:1984081","gkx","performanceAbsoluteNow","performanceNavigationStart","performanceNow"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j;a=b("QPLEvent").getMarkerId;function k(a){var c=b("PerfXSharedFields").getCommonData();c={memory_stats:{total_mem:c.ram_gb!=null?c.ram_gb*1073741824:null},network_stats:{downlink_megabits:c.downlink_megabits,network_subtype:c.effective_connection_type,rtt_ms:c.rtt_ms},sitedata_info:{client_push_phase:c.client_push_phase,client_revision:c.client_revision,server_revision:c.server_revision},locale_info:{locale:c.locale,isRTL:c.isRTL}};b("gkx")("1224637")&&(c.workplace_info={is_gemini:b("gkx")("1217157")});if(b("gkx")("3752")&&typeof window.__sapienzMetadataCallback__==="function"){var d=window.__sapienzMetadataCallback__();c.sapienz={request_id:String(d.requestId),config_name:String(d.configName)}}b("gkx")("4075")&&(c.usid={usid_override:b("USID").get().serializeForRequest()});return babelHelpers["extends"]({},a,{metadata:babelHelpers["extends"]({},a.metadata,c)})}function l(a,b,c){return{i:a,m:c,r:b}}function m(a,c){return new(b("Promise"))(function(){var d=c||a;typeof window.__je2e_recordQPLMarker==="function"&&window.__je2e_recordQPLMarker(d);(g||(g=b("Env"))).enable_qplinspector===!0&&b("Bootloader").loadModules(["QPLInspector"],function(a){a.appendLog(d)},"QuickPerformanceLogger");b("gkx")("1554827")||b("gkx")("708253")||b("gkx")("3831")?b("PerfFalcoEvent").logImmediately(function(){return d}):b("PerfFalcoEvent").log(function(){return d})})}function n(){return(g||(g=b("Env"))).enable_qplinspector===!0||typeof window.__je2e_recordQPLMarker==="function"||b("gkx")("1738486")}function o(){b("Arbiter").inform("qpl_debugger_finished")}var p=(h||(h=b("performanceAbsoluteNow")))();typeof window.__je2e_felabsTracePlugin_setQplInit==="function"&&window.__je2e_felabsTracePlugin_setQplInit((i||(i=b("performanceNow")))());var q={debug:function(a,b,c){},warn:function(a){b("FBLogger")("qpl").blameToPreviousDirectory().warn(a)}},r="qpl";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,{decorateEventBeforeUpload:k,unsampleAllEvents:n,onDebuggingIdEnded:o,performanceNow:h||(h=b("performanceAbsoluteNow")),moduleLoadTimestamp:p,logger:q,sendEvent:m})||this;b("Run").onUnload(function(){c.$QuickPerformanceLogger1(),c.$QuickPerformanceLogger2(706,{respectUnloadPolicy:!0,timestamp:c.currentTimestamp()})});c.$QuickPerformanceLogger3();c.initQplFlipperPlugin();c.initQplSapienzPlugin();return c}var d=c.prototype;d.$QuickPerformanceLogger3=function(){var a=this,c=(j||(j=b("WebStorage"))).getSessionStorageForRead();if(!c){this.$QuickPerformanceLogger4("_loadSavedState","sessionStorage is not available");return}var d=c.getItem(r);if(d==null)return;c.removeItem(r);c=JSON.parse(d);if(c==null){this.$QuickPerformanceLogger4("_loadSavedState","Saved state failed to deserialize");return}if(c.markers==null||c.markers.length===0){this.$QuickPerformanceLogger4("_loadSavedState","No saved markers found");return}c.markers.forEach(function(b){var c=b[0],d=b[1];b=b[2];a.addMarker(c,d,b);a.$QuickPerformanceLogger4("_loadSavedState","Marker "+c+" (instanceKey: "+d+") resumed")})};d.$QuickPerformanceLogger1=function(){var a=this,c=[];this.activeMarkers.forEach(function(a,b){a.forEach(function(a,d){a.resumeAfterNavigation===!0&&(delete a.resumeAfterNavigation,c.push([b,d,a]))})});if(c.length>0){var d={markers:c},e=(j||(j=b("WebStorage"))).getSessionStorage();e=j.setItemGuarded(e,r,JSON.stringify(d));e&&(c.forEach(function(b){var c=b[0],d=b[1];b=b[2];c=l(c,b.sampleRate,b.samplingMethod);a.markerEnd(c,96,d)}),this.$QuickPerformanceLogger4("_storeSavedState","Failed to store saved state: "+e.message),b("FBLogger")("qpl").catching(e).warn("Failed to store QPL state: "+JSON.stringify(d,null,2)));c.forEach(function(b){var c=b[0];b=b[1];a.deleteMarker(c,b)})}};d.markerStoreBeforeNavigation=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;a=this.getMarker(a,b);if(!a)return;a.resumeAfterNavigation=!0};d.markerStartFromNavStart=function(a,c,d){c===void 0&&(c=0);d=d===void 0?{}:d;var e=d.cancelExisting;e=e===void 0?!1:e;var f=d.cancelOnUnload;f=f===void 0?!1:f;var g=d.trackedForLoss;g=g===void 0?!1:g;var h=d.type;h=h===void 0?1:h;d=d.qplInternalDoNotUseConvertToTimeOnServer;var i=b("performanceNavigationStart")();d=typeof d==="function"?d(i):void 0;this.markerStart(a,c,i,{cancelExisting:e,cancelOnUnload:f,trackedForLoss:g,type:h,qplInternalDoNotUseAbsoluteTimeOrigin:d});if(b("performanceNavigationStart").isPolyfilled){i=this.getMarker(a,c);i&&(i.timestampIsApproximate=!0)}};d.$QuickPerformanceLogger2=function(a,b){var c=this;b=b===void 0?{}:b;var d=b.timestamp,e=b.respectUnloadPolicy;this.activeMarkers.forEach(function(b,f){b.forEach(function(b,g){if(!e||b.cancelOnUnload===!0){b=l(f,b.sampleRate,b.samplingMethod);c.markerEnd(b,a,g,d)}})})};d.$QuickPerformanceLogger4=function(a,b,c){q.debug(a,b,c)};d.initQplFlipperPlugin=function(){b("cr:1367102")!=null&&this.addListener(b("cr:1367102").qplFlipperPlugin.listener())};d.initQplSapienzPlugin=function(){b("cr:1984081")!=null&&this.addListener(b("cr:1984081").getQplSapienzListener())};return c}(b("QPLCore"));d=new c();e.exports=d}),null);
__d("qpl",["QPLHasteSupportDataStorage","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};a={_:function(a,b){var d=h[b];if(d==null){var e=c("QPLHasteSupportDataStorage").get(b);e==null?(c("recoverableViolation")("Failed to find a Haste-supplied config for the QPL event "+("identified by token `"+b+"`."),"staticresources"),d={i:a}):d=babelHelpers["extends"]({i:a},e);h[b]=d}return d}};b=a;g["default"]=b}),98);
__d("MStoriesMediaLoaded",["Event","QuickPerformanceLogger","Run","qpl"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.getInstance=function(){this.$1||(this.$1=new a());return this.$1};function a(){var b=this;this.$2=[];this.$3=function(){b.$5(),a.$1=null};d("Run").onLeave(this.$3)}a.init=function(b){a.getInstance().setup(b.photo)};var b=a.prototype;b.$4=function(){c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238354,"1306"),2),c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238356,"3510"),2),c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238313,"2969"),2)};b.setup=function(a){var b=this;this.$5();this.$2=[];a!=null&&(a instanceof HTMLImageElement&&a.complete?this.$4():this.$2.push(c("Event").listen(a,"load",function(){b.$4()})))};b.$5=function(){this.$2.forEach(function(a){return a.remove()})};return a}();a.$1=null;g["default"]=a}),98);
__d("MStoriesDOMUtils",["Bootloader","DOM"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){a=d("DOM").scry(a,b,e);if(a.length===0){c("Bootloader").loadModules(["FBLogger"],function(a){a("fbstories").mustfix("Failed to load dom element with tag %s and sigil %s",b,e||"")},"MStoriesDOMUtils");return null}return a[0]}g.find=a}),98);
__d("MStoriesGating",["MFBStoriesGatingConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("MFBStoriesGatingConfig").enableTextOverlayProduction}function b(){return c("gkx")("1260876")}function d(){return!1}function e(){return!1}g.genShouldShowTextOverlays=a;g.shouldMockLogging=b;g.shouldShowOptimisticPreviews=d;g.shouldShowNTViewerSheet=e}),98);
__d("MStoriesHideHeaderListener",["Bootloader","MArrays","MStoriesUIConstants","Stratcom","URI"],(function(a,b,c,d,e,f){"use strict";var g,h="m:page:render:start";a={_hideHeaderListener:null,setup:function(){var a=this;if(this._hideHeaderListener)return;this._hideHeaderListener=b("Stratcom").listen(h,null,function(c){c=new(g||(g=b("URI")))(c.getData().path);c=c.getPath();b("MArrays").findPrefix(b("MStoriesUIConstants").HIDE_HEADER_URLS,c)&&(b("Bootloader").loadModules(["MStoriesDisplayUtils"],function(a){a.toggleChromeBar(!1)},"MStoriesHideHeaderListener"),b("Stratcom").removeCurrentListener(),a._hideHeaderListener=null)})}};e.exports=a}),null);
__d("MStoriesProductionTrayUtils",["cx","CSS","MFBStoriesGatingConfig","MStoriesDOMUtils","MStoriesProductionInfo","MStoriesUploadStatus"],(function(a,b,c,d,e,f,g){"use strict";var h={getAnimationPog:function(){var a=document.getElementById("m-stories-owner-bucket-pog");return a?a:document.getElementById("m-stories-add-item-pog")},getUploadingClass:function(){var a=b("MFBStoriesGatingConfig").trayType;return a==="nine_by_sixteen"?"loading":"_1zpf"},updateProductionPog:function(){var a=b("MStoriesProductionInfo").getUploadStatus();if(a===b("MStoriesUploadStatus").UPLOADING){var c=h.getAnimationPog(),d=document.getElementById("m-stories-add-item-pog"),e=document.getElementById("m-stories-add-item"),f=document.getElementById("m-stories-owner-bucket-pog"),g=h.getUploadingClass();c&&(b("CSS").addClass(c,g),c.id==="m-stories-owner-bucket-pog"?(d&&b("CSS").removeClass(d,g),e&&b("CSS").addClass(e,"disable")):(f&&b("CSS").removeClass(f,g),e&&b("CSS").removeClass(e,"disable")))}c=b("MFBStoriesGatingConfig").trayType;if(c!=="circular"){d=document.getElementById("m-stories-owner-bucket");if(d){f=d.getAttribute("data-is-optimistic-item")!=null;g=a===b("MStoriesUploadStatus").UPLOADING||a===b("MStoriesUploadStatus").FAILED;f&&(g?b("CSS").removeClass(d,"hidden"):b("CSS").addClass(d,"hidden"))}this._updateProductionItemText()}this._updateErrorState()},_updateProductionItemText:function(){var a=document.getElementById("m-stories-owner-bucket");if(!a)return;var c=b("MStoriesDOMUtils").find(a,"div","m-stories-rectangular-item-title");a=b("MStoriesDOMUtils").find(a,"div","m-stories-rectangular-item-adding-story-title");if(c&&a){var d=b("MStoriesProductionInfo").getUploadStatus();switch(d){case b("MStoriesUploadStatus").UPLOADING:b("CSS").addClass(c,"hidden");b("CSS").removeClass(a,"hidden");break;default:b("CSS").addClass(a,"hidden");b("CSS").removeClass(c,"hidden");break}}},_updateErrorState:function(){var a=b("MStoriesProductionInfo").getUploadStatus(),c=b("MFBStoriesGatingConfig").trayType;switch(c){case"fblite_with_profile_pog":c=document.getElementById("m-stories-owner-bucket");if(c!=null){var d=b("MStoriesDOMUtils").find(c,"div","m-stories-rectangular-item-count");c=b("MStoriesDOMUtils").find(c,"div","m-stories-rectangular-item-count-error");d&&c&&(a===b("MStoriesUploadStatus").FAILED?(b("CSS").addClass(d,"hiddenByError"),b("CSS").removeClass(c,"hidden")):(b("CSS").removeClass(d,"hiddenByError"),b("CSS").addClass(c,"hidden")))}break;case"mobile_three_by_one":d=this.getAnimationPog();a===b("MStoriesUploadStatus").FAILED?b("CSS").addClass(d,"_6y1s"):b("CSS").removeClass(d,"_6y1s");break;case"nine_by_sixteen":c=this.getAnimationPog();d=document.getElementById("m-stories-owner-title");a===b("MStoriesUploadStatus").FAILED?(b("CSS").addClass(c,"error"),d&&b("CSS").addClass(d,"error")):(b("CSS").removeClass(c,"error"),d&&b("CSS").removeClass(d,"error"));break;default:c=this.getAnimationPog();c&&(a===b("MStoriesUploadStatus").FAILED?b("CSS").addClass(c,"_4ts1"):b("CSS").removeClass(c,"_4ts1"));break}}};e.exports=h}),null);
__d("MStoriesTrayInfo",[],(function(a,b,c,d,e,f){"use strict";var g={_hasNextPage:{},_trayBucketIDs:{},_trayTrackingStrings:{},_trayNeedsRefresh:!1,setTrayBucketIDs:function(a){var b=g._getKey(a.key);g._trayBucketIDs[b]=a.bucketIDs;g._hasNextPage[b]=a.hasNextPage;g._trayTrackingStrings[b]=a.trackingStrings},appendTrayBucketIDs:function(a){var b=g._getKey(a.key);g._trayBucketIDs[b]==null&&(g._trayBucketIDs[b]=[]);g._trayBucketIDs[b]=g._trayBucketIDs[b].concat(a.bucketIDs);g._trayTrackingStrings[b]==null&&(g._trayTrackingStrings[b]=[]);g._trayTrackingStrings[b]=g._trayTrackingStrings[b].concat(a.trackingStrings);g._hasNextPage[b]=a.hasNextPage},getTrayBucketIDs:function(a){a=g._getKey(a);return g._trayBucketIDs[a]},getTrayTrackingStrings:function(a){a=g._getKey(a);return g._trayTrackingStrings[a]||[]},getHasNextPage:function(a){a=g._getKey(a);return!!g._hasNextPage[a]},_getKey:function(a){return a==null?"top_of_feed":a},setTrayNeedsRefresh:function(a){g._trayNeedsRefresh=a},getTrayNeedsRefresh:function(){return g._trayNeedsRefresh}};e.exports=g}),null);
__d("MStoriesTrayUIConstants",[],(function(a,b,c,d,e,f){"use strict";a=20;f.REDIRECT_DELAY_IN_MS=a}),66);
__d("MStoriesTrayAsync",["cx","Bootloader","CSS","DOM","MFBStoriesGatingConfig","MFBStoriesOptimisticTrayGatedModule","MPageController","MStoriesDOMUtils","MStoriesGating","MStoriesHideHeaderListener","MStoriesProductionTrayUtils","MStoriesStratcomEvents","MStoriesTrayInfo","MStoriesTrayUIConstants","QuickPerformanceLogger","Run","Stratcom","URI","WebFunnelLogger","qpl"],(function(a,b,c,d,e,f,g){var h,i=b("MFBStoriesOptimisticTrayGatedModule").module,j="m:page:render:cache:complete-with-replays";a={_currentItemLoading:null,_listeners:[],_spinner:null,_feedUnitURIs:[],registerFeedUnitWithUri:function(a){this._feedUnitURIs.push(a.uri),this._init()},updateSpinner:function(a){this._spinner=a.spinner,this._init()},_init:function(){var a=this;if(this._listeners.length>0)return;this._listeners=[b("Stratcom").listen(j,null,function(){if(!b("MStoriesTrayInfo").getTrayNeedsRefresh())return;b("Bootloader").loadModules(["MStoriesTrayUtils"],function(b){b.refreshTray(),b.refreshFeedUnitsWithURIs(a._feedUnitURIs)},"MStoriesTrayAsync")}),b("Stratcom").listen("click","m-stories-tray-archive-link",this._openArchive),b("Stratcom").listen("click","m-stories-tray-pog-container",function(b){a._openPOG(b)}),b("Stratcom").listen("keypress","m-stories-tray-pog-container",function(b){var c=b.getSpecialKey();(c==="return"||c==="space")&&(b.prevent(),a._openPOG(b))}),b("Stratcom").listen(b("MStoriesStratcomEvents").UPLOAD_SUCCESS,null,function(a){a=a.getData()||{};i&&i.handleUploadSuccess(a.newThreadID,a.optimisticThreadID)})];b("MStoriesHideHeaderListener").setup();i&&i.initializeOnTrayLoad();b("MStoriesProductionTrayUtils").updateProductionPog();b("Run").onLeave(function(){a._destroy()})},_openArchive:function(a){a=a.getNode("m-stories-tray-archive-link");if(a!=null){var c=a.getAttribute("data-href");c&&window.setTimeout(function(){b("MPageController").load(c,{hideLoadingIndicator:!1})})}},_openPOG:function(a){var c=this,d=a.getNode("m-stories-tray-pog-container");if(this._currentItemLoading){if(this._currentItemLoading===d)return;this._setLoadingStateHidden(this._currentItemLoading,!0)}if(!d)return;d.id==="m-stories-owner-bucket"?b("Bootloader").loadModules(["MStoriesProductionTrayAsync"],function(a){if(!d)return;if(a.handleFailedAddToStoryPogSelected())return;c._openViewer(d)},"MStoriesTrayAsync"):this._openViewer(d)},_setLoadingStateHidden:function(a,c){var d=b("MFBStoriesGatingConfig").trayType,e=c?b("CSS").removeClass:b("CSS").addClass;switch(d){case"circular":e(a,"loading");break;case"fblite_with_profile_pog":e(a,"_6pvo");break;case"nine_by_sixteen":case"mobile_three_by_one":a=b("MStoriesDOMUtils").find(a,"div","m-stories-tray-pog");if(a){if(c&&a.id==="m-stories-owner-bucket-pog")return;d==="nine_by_sixteen"?e(a,"loading"):e(a,"_1zpf")}break}},_openViewer:function(a){this._currentItemLoading=a;var c=b("MFBStoriesGatingConfig").trayType;c=c!=="circular";b("QuickPerformanceLogger").markerEnd(b("qpl")._(13238313,"2969"),4);b("QuickPerformanceLogger").markerStart(b("qpl")._(13238313,"2969"));if(!c){c=b("MStoriesDOMUtils").find(a,"i","m-stories-tray-pog-picture");c!=null&&b("DOM").insertAfter(c,this._spinner)}var d=a.getAttribute("data-href");b("MStoriesGating").shouldShowOptimisticPreviews()&&a.id==="m-stories-owner-bucket"&&i&&(d=i.getURI(a));if(d){c=new(h||(h=b("URI")))(d);c=c.getQueryData();var e=c.tray_session_id;new(b("WebFunnelLogger"))("FBStoriesMTouchTrayViewerFunnelDefinition").addFunnelPayload("tray_index",c.selected_bucket_index).setSessionKey((c=e)!=null?c:"null").setAction("Tray item select").log();this._setLoadingStateHidden(a,!1);window.setTimeout(function(){b("MPageController").load(d,{hideLoadingIndicator:!0});var a=b("Stratcom").listen("m:page:iui:response:complete",null,function(c){c=c.getData()||{};c=c.path;if(c==null||!c.includes("stories/view_tray"))return;new(b("WebFunnelLogger"))("FBStoriesMTouchTrayViewerFunnelDefinition").setSessionKey((c=e)!=null?c:"null").setAction("Viewer rendered").markEnd().log();a.remove()})},b("MStoriesTrayUIConstants").REDIRECT_DELAY_IN_MS)}},_destroy:function(){var a=b("MStoriesProductionTrayUtils").getAnimationPog();a&&b("CSS").removeClass(a,b("MStoriesProductionTrayUtils").getUploadingClass());this._listeners.forEach(function(a){return a.remove()});this._listeners=[]}};e.exports=a}),null);
__d("MFeedRefresh",["Event","MAnimatedScroll","MHome","MPageController","MViewport","Stratcom","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h="/home.php",i=!1,j=!1,k=new(c("SubscriptionsHandler"))(),l=null,m=null,n=0,o=!1,p=500;function q(a){d("MViewport").scrollToTop(),d("MPageController").forceLoad(a)}function r(a){var b=h,c=!1;a&&(a.feedPath!==null&&a.feedPath!==void 0&&(b=a.feedPath),c=!!a.animate);if(c&&a){c=a.animationDuration===null||a.animationDuration===void 0?p:a.animationDuration;d("MAnimatedScroll").scrollToTop({duration:c},function(){q(b)})}else q(b)}function s(){n=0,l&&(c("clearTimeout")(l),l=null)}function t(){s(),j&&(k.release(),k.engage())}function u(a){if(!d("MHome").isHome())return!1;var b=!0;if(a&&n&&m!==null){a=Date.now()-n;b=a>=m}if(!b)return!1;t();r();return!0}function v(){s(),n=Date.now(),l=c("setTimeoutAcrossTransitions")(function(){u(!1)},m)}function w(){var a=u(!0);a||v()}function x(){t();var a=d("MHome").isHome();if(!a)return;v();j&&(k.addSubscriptions(c("Event").listen(document,"touchstart",w,!0)),o&&k.addSubscriptions(c("Event").listen(document,"mousedown",w,!0)))}function y(a,b){b===void 0&&(b=!1);if(a<=0)return;m=a*60*1e3;j=b;c("Stratcom").listen("history:change",null,x);x()}function a(a){if(i)return;y(a.intervalMinutes,a.resetOnTouch);i=!0}g.reloadFeed=r;g.reloadFeedIfNeeded=u;g.init=a}),98);
__d("Time",[],(function(a,b,c,d,e,f){a={getGMTOffset:function(a){var b=new Date(),c=b.getTimezoneOffset()/30;b=b.getTime()/1e3;a=Math.round((a-b)/1800);b=Math.round(c+a)%48;b>24?b-=Math.ceil(b/48)*48:b<-28&&(b+=Math.ceil(b/-48)*48);return b*30}};e.exports=a}),null);
__d("TimezoneAutoset",["MRequest","Time"],(function(a,b,c,d,e,f){var g;a=function(a){if(g)return;g=!0;if(!a.time||a.offset===void 0)return;var c=-b("Time").getGMTOffset(a.time);(a.forceUpdate||c!=a.offset)&&new(b("MRequest"))(a.uri).setMethod("POST").setData({offset:c,is_forced:a.forceUpdate}).send()};f.main=a}),null);