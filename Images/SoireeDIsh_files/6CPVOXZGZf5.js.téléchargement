if (self.CavalryLogger) { CavalryLogger.start_js(["5I8aA+J"]); }

__d("MRegCountryCodeSelector",["cx","CSS","DOM","QE2Logger","ge"],(function(a,b,c,d,e,f,g,h){"use strict";var i={_shouldShowSelector:!1,_currentCPType:"any",_useCountryCodeSelector:!1,_isLabelFirst:!1,_selectorIsShown:!1,_inBackButtonGKExperiment:!1,_logMSiteRegQEExposureOnOpen:!1,setCurrentCPType:function(a){i._currentCPType=a},initCountryCodeSelector:function(a){i._shouldShowSelector=a.isPhoneNumber,i._useCountryCodeSelector=a.useCountryCodeSelector,i._isLabelFirst=a.isLabelFirst,i._inBackButtonGKExperiment=a.inBackButtonGKExperiment,i._logMSiteRegQEExposureOnOpen=a.logMSiteRegQEExposureOnOpen},maybeShowCountryCodeSelector:function(){if(i._shouldShowSelector&&i._currentCPType==="phone"&&i._useCountryCodeSelector){var a=c("ge")("country_code_button");c("CSS").show(a)}},hideCountryCodeSelector:function(){var a=c("ge")("country_code_button");a!==null&&c("CSS").hide(a)},clickCountryCodeSelector:function(a,b){var e=c("ge")("country_code_selector"),f=c("ge")("contactpoint_step_title"),g=c("ge")("reg_email__"),h=c("ge")("contactpoint_step_body");if(!f||!g||!h||!e)return;i._hide(f,g,h,a.CPTypeToggleUnit,a.buttonBlock);i._show(e);i._logMSiteRegQEExposureOnOpen&&d("QE2Logger").logExposureForDatr("msite_registration");b.prevent()},choseCountryCode:function(a,b){var e=b.getNode("country_code_option");if(e instanceof HTMLElement){var f=c("ge")("country_code_display_text"),g=c("ge")("country_code_display_code");f&&d("DOM").setContent(f,e.dataset.country);i._isLabelFirst&&g&&d("DOM").setContent(g,"(+"+e.dataset.code+")");f=c("ge")("country_code_user_select_option");f.value=e.dataset.iso;i.setCurrentCountryCodeDisplayed(b,e.dataset.iso)}i.switchCountryCodeSelectorToContactpointInput(a)},setCurrentCountryCodeDisplayed:function(a,b){a=c("ge")("country_code_option"+b);b=a.parentElement.firstElementChild;c("CSS").removeClass(b,"_7vna");a.parentElement.insertBefore(a,b);c("CSS").addClass(a,"_7vna")},switchCountryCodeSelectorToContactpointInput:function(a){var b=c("ge")("country_code_selector"),d=c("ge")("contactpoint_step_title"),e=c("ge")("reg_email__"),f=c("ge")("contactpoint_step_body");if(!d||!e||!f||!b)return;i._show(d,e,f,a.CPTypeToggleUnit,a.buttonBlock);i._hide(b)},isShown:function(){return i._selectorIsShown},isGKTrue:function(){return i._inBackButtonGKExperiment},_show:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];b.forEach(function(a){return c("CSS").removeClass(a,"hidden_elem")});i._selectorIsShown=!0},_hide:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];b.forEach(function(a){return c("CSS").addClass(a,"hidden_elem")});i._selectorIsShown=!1}};a=i;g["default"]=a}),98);
__d("setupPasswordEncryption",["DOM","Event","FBBrowserPasswordEncryption","LoginServicePasswordEncryptDecryptEventTypedLogger","promiseDone"],(function(a,b,c,d,e,f){var g={};a={submitEncryptedPassword:function(a,c,d,e){b("Event").listen(a,"submit",function(f){f.preventDefault();f=a[c].value;if((window.crypto||window.msCrypto)&&e){var g=b("FBBrowserPasswordEncryption"),h=Math.floor(Date.now()/1e3).toString(),i=b("promiseDone");i(g.encryptPassword(e.keyId,e.publicKey,f,h),function(d){d=b("DOM").create("input",{type:"hidden",name:"encpass",value:d});a.appendChild(d);a[c].disabled=!0;a.submit()},function(c){var e="#PWD_BROWSER",f=5,g=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new g().setError(c).setErrorMessage(c.message).setGrowthFlow(d).setPasswordTag(e).setPasswordEncryptionVersion(f).setPasswordTimestamp(h).logVital();a.submit()})}else a.submit()})},setupPasswordEncryptionBeforeSubmission:function(a,c,d,e,f,h,i){var j=b("promiseDone"),k=b("FBBrowserPasswordEncryption"),l=Math.floor(Date.now()/1e3).toString(),m=null;h===!0&&(g[e]=g[e]||"",!a.value&&g[e].length?j(k.encryptPassword(d.keyId,d.publicKey,g[e],l),function(a){m=a},function(c){var d="#PWD_BROWSER",g=5,h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError(c).setGrowthFlow(e).setErrorMessage(c.message).setPasswordTag(d).setPasswordEncryptionVersion(g).setPasswordTimestamp(l).logVital();f(null,a.value)}):g[e]=a.value);j(k.encryptPassword(d.keyId,d.publicKey,a.value,l),function(d){if(c){m!=null&&(d=m);var e=b("DOM").create("input",{type:"hidden",name:"encpass",value:d});c.appendChild(e);i||(a.disabled=!0)}f(d,null)},function(c){var d="#PWD_BROWSER",g=5,h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError(c).setGrowthFlow(e).setErrorMessage(c.message).setPasswordTag(d).setPasswordEncryptionVersion(g).setPasswordTimestamp(l).logVital();f(null,a.value)})}};e.exports=a}),null);
__d("MRecoverPasswordController",["DOM","Event","setupPasswordEncryption"],(function(a,b,c,d,e,f){e.exports={setFocus:function(a){b("DOM").find(a,"input").focus()},sendEncryptedPassword:function(a,c,d){b("Event").listen(c,"click",function(c){c.preventDefault();c=function(){a.submit()};var e=b("setupPasswordEncryption");e.setupPasswordEncryptionBeforeSubmission(a.password_new,a,d,"mtouch_account_recovery",c)})}}}),null);
__d("MTextInputClearable",["$","DOM","Stratcom","Style","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=function(a){var c=b("$")(a.wrapper),d=(a=b("DOM")).find(c,"input","clearableInput"),e=a.find(c,"div","clearButton"),f=getComputedStyle(c).getPropertyValue("display").indexOf("inline-")!==-1,g=[],h,i=!1,j=c.style.width;function k(){h&&clearTimeout(h);if(i)return;f&&!j&&b("Style").set(c,"width",c.clientWidth+"px");i=!0;b("DOM").show(e)}function l(){if(!i)return;i=!1;b("DOM").hide(e);b("Style").set(c,"width",j)}function m(a){h=b("setTimeoutAcrossTransitions")(function(){l()},0)}function n(a){!d.value.length?l():e.style.display==="none"&&k()}function o(a){i&&(l(),k())}function p(a){d.value="",l(),d.focus(),b("Stratcom").invoke("m:text-input:clear",null,d)}function q(){h&&clearTimeout(h),b("Stratcom").hasSigil(d,"permanentInput")||(g.forEach(function(a){a.remove()}),g=null)}g.push(a.listen(d,"blur",null,m),a.listen(d,["focus","keyup"],null,n),a.listen(e,"click",null,p),b("Stratcom").listen("m:page:unload",null,q),b("Stratcom").listen(["m:viewport:orientation-change","resize"],null,o))};f.main=a}),null);
__d("IOS7PasswordHack",["Stratcom"],(function(a,b,c,d,e,f){var g="password-plaintext",h=!1;function a(){if(h)return;h=!0;var a=b("Stratcom").listen(["keypress","keydown"],g,function(a){a=a.getNode(g);a.type="text"}),c=b("Stratcom").listen("blur",g,function(a){a=a.getNode(g);a.value===""&&(a.type="password")});b("Stratcom").listen("m:page:unload",null,function(b){a.remove(),c.remove(),h=!1})}e.exports={init:a}}),null);