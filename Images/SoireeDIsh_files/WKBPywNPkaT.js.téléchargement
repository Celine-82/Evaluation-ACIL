if (self.CavalryLogger) { CavalryLogger.start_js(["nep9j7W"]); }

__d("MPhotosEditPhoto",["fbt","$","DOM","MPlacesTagger","Stratcom"],(function(a,b,c,d,e,f,g){a={init:function(a,c,d,e){var f=this;this._editPhotoView=a;this._placeTagger=new(b("MPlacesTagger"))(c);this._privacySelector=d;this._preview=e;this._header=b("DOM").find(b("$")("page"),"div","MTopBlueBarHeader");this._listeners=[(a=b("Stratcom")).listen("click","edit_location_cell",function(a){f._hideEditPhotoView(),f._placeTagger.show(),f._preview.showIfHasValue()}),a.listen("click","edit_privacy_cell",function(a){f._hideEditPhotoView(),f._privacySelector.show()}),this._placeTagger.listen("cancel",function(a){f._placeTagger.hide(),f._showEditPhotoView()}),this._placeTagger.listen("submit",function(a){f._handleLocationAdd(a)}),a.listen("MPhotosPrivacySelector:cancel",null,function(a){f._privacySelector.hide(),f._showEditPhotoView()}),a.listen("MPrivacySettingsSelector:selected",null,function(a){var c;a=a.getData();var d=b("$")("edit_privacy_display");(c=b("DOM")).setContent(d,null);c.appendContent(d,a.iconElement.cloneNode(!0));c.appendContent(d,a.labelElement.cloneNode(!0));c.find(f._editPhotoView,"input","edit_privacyx_input").value=a.value;f._privacySelector.hide();f._showEditPhotoView()}),this._preview.addListener("clear",function(a){return f._handleLocationRemove(a)}),a.listen("m:page:unload",null,this._cleanup.bind(this))]},_showEditPhotoView:function(){b("DOM").show(this._header),b("DOM").show(this._editPhotoView)},_hideEditPhotoView:function(){b("DOM").hide(this._header),b("DOM").hide(this._editPhotoView)},_handleLocationAdd:function(a){this._handleLocationUpdate(a.id,a.name,a.name)},_handleLocationRemove:function(a){this._handleLocationUpdate("-1","",g._(/*FBT_CALL*/"Ajouter un lieu"/*FBT_CALL*/))},_handleLocationUpdate:function(a,c,d){b("DOM").find(this._editPhotoView,"input","place_id").value=a,this._preview.setValue(c),b("DOM").setContent(b("DOM").find(this._editPhotoView,"div","edit_location_display"),d),this._placeTagger.hide(),this._showEditPhotoView()},_cleanup:function(){this._listeners.forEach(function(a){a.remove()})}};e.exports=a}),null);